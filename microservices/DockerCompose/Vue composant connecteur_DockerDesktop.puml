@startuml

node "Single Node" {
    component NodeController as nodeC
    component TripComparator as tc
    component RouteTimeProvider as rtp
    component Stm
    queue RabbitMQ as mq {
        card "coordinate_message(exchange)" as queryEx
        card "bus_position_updated(exchange)" as resEx
        queue query as qq
        queue response as rq
        queryEx --> qq
        rq <-- resEx
    }
}
nodeC ..> queryEx : AMQP protocol
nodeC <.. rq : AMQP protocol
qq ..> tc : AMQP protocol
resEx <.. tc : AMQP protocol
tc -(0-> rtp : Get
tc -(0-> Stm : Get/Post
@enduml